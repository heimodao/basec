---
layout: post
title: "C注意事项"
categories: C/C++ Faq
tags: C
author: linkzw
---

* content
{:toc}


## 编译c/c++

	gcc test.c 			# 编译c默认输出a.out
	g++ test.c 			# 编译c++

	gcc test.c -o hello					# 编译输出hello可执行文件
	gcc test.c -o hello -Wall -Wextra 	# 默认打开所有编译器大部分警告
	gcc thread.c -lpthread				# 编译多线程程序
	
	-std=c99
	
## gdb

	gcc test.c -g -q  	# -g使用gdb调试，-q不显示一些提示语句

## 全局、静态、局部变量

## 内存静态区

## 函数调用

* 形参、实参的区别？
    
* 函数栈
   
* 函数栈、堆空间的区别

* 函数栈中的黑客攻击

## 内存对齐

## 字节序


## 指针数组和数组指针

数组指针：int (*p)[]

()优先级高，首先说明p是一个指针，指向一个整型数组。也就是说执行p + 1时，要跨过n个整型数据的长度。
如二维数组赋给指针:

	int a[3][4];
	int (*p)[4];
	p = a;
	p++; // 此时p指向a[1][]


指针数组：int *p[n]

[]优先级高，首先与p结合成为一个数组，再由int*说明这是一个整型指针数组，他有n个指针类型的数组元素。这里执行p+1是错误的。


	p=a;      //错误
	*p = a;   // 正确，*p表示指针数组的第一个元素


数组指针只是一个指针变量，似乎是C语言里专门用来指向二维数组的，它占有内存中一个指针的存储空间。指针数组是多个指针变量，以数组形式存在内存当中，占有多个指针的存储空间。
还需要说明的一点就是，同时用来指向二维数组时，其引用和用数组名引用都是一样的。
比如要表示数组中i行j列一个元素: `*(p[i]+j)`、`*(*(p+i)+j)`、`(*(p+i))[j]`、`p[i][j]`


	
## const修饰符使用

	含义：const修饰的变量value不可变
	作用：可用于变量类型检查，替换difine、提高效率（const修饰的变量被保存在符号表中）
	
	
	char const *str;		// 指针变量不可变，只能指向str
	const char *str;		// str指向的数据不可变
	const char const *str;	// 两者皆不可变
	
	
## C 语言数组、指针的区别
## 派生类指针

## 结构体、共用体区别

## typedef使用
	
定义类型的使用。不同于define的简单宏替换。
	
	typedef char *pCHAR;
	pCHAR a,b;// 定义ab两个字符串指针
	
	typedef struct Stack {
		int val;
		Stack *next; // typedef可以少些一个struct
	} Stack;

	
## C传参的坑
	
	sizeof(数组名)	<=> 计算的是数组的存储大小
	sizeof(指针)	<=> 计算的是指针大小
	
	
C语言中，数组名作为参数传递给函数时，退化为指针。因此最好将数组大小跟随数组一起传递。[源码实例](https://github.com/wenruo95/algorithm/blob/master/c/test-array.c)
	
	long unsigned int len = sizeof(arr) / sizeof(arr[0]);// len = sizeof(arr) / sizeof(int);
	int test_func(int arr[],int len) {}

有些关于字符串数组长度可以直接遍历。


	比如char str[] = "helloworld"; // len = 10
	实际存储需要11个字节: 'h','e',......,'l','d','\0'
	'\0'实际代表着字符串结束符
	
	int char_len(char *str) {
		int len;
		for (len = 0; *(str + len) != '\0'; len++);
		return len;
	}
	

## c标准头文件

	// 标准c
	<assert.h>         //设定插入点
	<ctype.h>          //字符处理
	<errno.h>          //定义错误码
	<float.h>          //浮点数处理
	<limits.h>         //定义各种数据类型最值常量
	<locale.h>         //定义本地化函数
	<math.h>           //定义数学函数
	<setjmp.h>         //非局部跳转
	<signal.h>         //信号处理
	<stdarg.h>         //变长变元表
	<stddef.h>
	<stdio.h>          //定义输入／输出函数
	<stdlib.h>         //定义杂项函数及内存分配函数
	<string.h>         //字符串处理
	<time.h>           //定义关于时间的函数
	
	
	// c++
	<algorithm>        //STL 通用算法
	<bitset>           //STL 位集容器
	<complex>          //复数类
	<deque>            //STL 双端队列容器
	<exception>        //异常处理类
	<fstream>          //文件输入/输出
	<functional>       //STL 定义运算函数（代替运算符）
	<limits>
	<list>             //STL 线性列表容器
	<map>              //STL 映射容器
	<iomanip>
	<ios>              //基本输入／输出支持
	<iosfwd>           //输入／输出系统使用的前置声明
	<iostream>
	<istream>          //基本输入流
	<ostream>          //基本输出流
	<queue>            //STL 队列容器
	<set>              //STL 集合容器
	<sstream>          //基于字符串的流
	<stack>            //STL 堆栈容器　　　　
	<stdexcept>        //标准异常类
	<streambuf>        //底层输入／输出支持
	<string>           //字符串类
	<utility>          //STL 通用模板类
	<vector>           //STL 动态数组容器
	<cwchar>
	<cwctype>
	
	
	// C99 增加
	<complex.h>        //复数处理
	<fenv.h>           //浮点环境
	<inttypes.h>       //整数格式转换
	<stdbool.h>        //布尔环境
	<stdint.h>         //整型环境
	<tgmath.h>         //通用类型数学宏
	
	
## C语言优先级

[参考链接](http://zh.cppreference.com/w/c/language/operator_precedence)


优先级	| 运算符	| 描述				| 结合性
--------|-----------|-------------------|---------
1		| ++ --		| 后缀自增与自减     从左到右
--------|-----------|-------------------|---------
		| ()		| 函数调用
--------|-----------|-------------------|---------
		| []		| 数组下标
--------|-----------|-------------------|---------
		| .			| 结构体与联合体成员访问
--------|-----------|-------------------|---------
		| ->		| 结构体与联合体成员通过指针访问
--------|-----------|-------------------|---------
		| (type){list}  复合字面量(C99)
--------|-----------|-------------------|---------
2		| ++ --		| 前缀自增与自减	| 从右到左
--------|-----------|-------------------|---------
		| + -		| 一元加与减
--------|-----------|-------------------|---------
		| ! ~		| 逻辑非与逐位非
--------|-----------|-------------------|---------
		| (type)	| 类型转型
--------|-----------|-------------------|---------
		| *			| 间接（解引用）
--------|-----------|-------------------|---------
		| &			| 取址
--------|-----------|-------------------|---------
		| sizeof    | 取大小
--------|-----------|-------------------|---------
		| _Alignof	| 对齐要求(C11)
--------|-----------|-------------------|---------
3		| * / %		| 乘法、除法及余数  从左到右
--------|-----------|-------------------|---------
4		| + -		| 加法及减法
--------|-----------|-------------------|---------
5		| << >>		| 逐位左移及右移
--------|-----------|-------------------|---------
6		| < <=		| 分别为 < 与 ≤ 的关系运算符
--------|-----------|-------------------|---------
		| > >=		| 分别为 > 与 ≥ 的关系运算符
--------|-----------|-------------------|---------
7		| == !=		| 分别为 = 与 ≠ 关系
--------|-----------|-------------------|---------
8		| &			| 逐位与
--------|-----------|-------------------|---------
9		| ^			| 逐位异或（排除或）
--------|-----------|-------------------|---------
10		| |			| 逐位或（包含或）
--------|-----------|-------------------|---------
11		| &&		| 逻辑与
--------|-----------|-------------------|---------
12      | |			| 逻辑或
--------|-----------|-------------------|---------
13		| ?:		| 三元条件[注 3]	| 从右到左
--------|-----------|-------------------|---------
14		| =			| 简单赋值
--------|-----------|-------------------|---------
		| += -=		| 以和及差赋值
--------|-----------|-------------------|---------
		| *= /= %=	| 以积、商及余数赋值
--------|-----------|-------------------|---------
		| <<= >>=	| 以逐位左移及右移赋值
--------|-----------|-------------------|---------
		| &= ^= |=	| 以逐位与、异或及或赋值
--------|-----------|-------------------|---------
15		|	,		| 逗号				| 从左到右


 
## 参考资料

* [c深入学习](https://coolshell.cn/articles/4990.html)
